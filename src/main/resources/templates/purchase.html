<!DOCTYPE HTML>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Purchase</title>
</head>

<!-- Begin Page Content -->
<div layout:fragment="content" class="container-fluid">
    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Purchase</h1>
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary" th:text="${purchase.id gt 0 ? 'Edit Purchase' : 'New Purchase'}">-</h6>
        </div>
        <div class="card-body">
            <div style="padding-left: 100px; padding-right: 100px;">
                <div class="row">
                    <div class="col">
                        <div class="p-5">
                            <div th:if="${param.success}">
                                <div class="alert alert-info">
                                    Purchase saved successfully.
                                </div>
                            </div>

                            <div th:if="${errorResponse != null && errorResponse.hasErrors()}">
                                <ul>
                                    <div class="alert alert-danger">
                                        <li th:each="error : ${errorResponse.errors}" th:text="${error.description}"></li>
                                    </div>
                                </ul>
                            </div>
                            <form class="user" method="post"
                                  id="estimationForm"
                                  role="form"
                                  th:action="@{/purchase/save}"
                                  th:object="${purchase}">

                                <div id="itemContent">
                                    <div class="form-group row">
                                        <div class="col mb-sm-0">
                                            <div class="custom-control" style="display: flex">
                                                <div class="custom-radio small">
                                                    <input type="radio" class="custom-control-input" th:field="*{metalType}" th:value="GOLD" id="gold" >
                                                    <label class="custom-control-label pt-1" for="gold">GOLD</label>
                                                </div>
                                                <div class="custom-radio small pl-5">
                                                    <input type="radio" class="custom-control-input" th:field="*{metalType}" th:value="SILVER" id="silver" >
                                                    <label class="custom-control-label pt-1" for="silver">SILVER</label>
                                                </div>
                                            </div>
                                            <input type="hidden" id="id" th:field="*{id}">
                                        </div>

                                        <div class="col mb-sm-0">
                                            <div class="custom-control" style="display: flex">
                                                <div class="custom-radio small">
                                                    <input type="radio" class="custom-control-input" th:field="*{purchaseType}" th:value="PURCHASE" id="PURCHASE" >
                                                    <label class="custom-control-label pt-1" for="PURCHASE">PURCHASE</label>
                                                </div>
                                                <div class="custom-radio small pl-5">
                                                    <input type="radio" class="custom-control-input" th:field="*{purchaseType}" th:value="RETURN" id="RETURN" >
                                                    <label class="custom-control-label pt-1" for="RETURN">RETURN</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr/>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input type="text" class="form-control form-control-user" id="supplierName"
                                                   name="supplierName"
                                                   placeholder="Supplier"
                                                   th:field="*{supplierName}">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input type="number" class="form-control form-control-user" id="purchaseBillNo"
                                                   placeholder="Purchase Bill #"
                                                   name="purchaseBillNo"
                                                   th:field="*{purchaseBillNo}">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input type="date" class="form-control form-control-user" id="purchaseDate"
                                                   placeholder="Date"
                                                   name="purchaseDate"
                                                   th:field="*{purchaseDate}">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="purity"
                                                   name="purity"
                                                   placeholder="Ornament Purity"
                                                   th:field="*{purity}"
                                                   type="number" step="any">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="salePurity"
                                                   name="salePurity"
                                                   placeholder="Ornament Sale Purity"
                                                   th:field="*{salePurity}"
                                                   type="number" step="any">
                                        </div>
                                    </div>
                                    <hr/>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="grossWeight"
                                                   name="grossWeight"
                                                   placeholder="Enter gross weight"
                                                   th:field="*{grossWeight}"
                                                   type="number" step="any">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="stnWeight"
                                                   name="stnWeight"
                                                   placeholder="Stones Weight"
                                                   th:field="*{stnWeight}"
                                                   type="number" step="any">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="netWeight"
                                                   name="netWeight" readonly="readonly"
                                                   placeholder="Net Weight"
                                                   th:field="*{netWeight}"
                                                   type="number" step="any">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="effectiveWeight"
                                                   name="effectiveWeight" readonly="readonly"
                                                   placeholder="Effective Weight"
                                                   th:field="*{effectiveWeight}"
                                                   type="number" step="any">
                                        </div>
                                    </div>
                                    <hr/>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="pcs"
                                                   name="pcs"
                                                   placeholder="Enter no of pieces"
                                                   th:field="*{pcs}"
                                                   type="number">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="mcAmount"
                                                   name="mcAmount"
                                                   placeholder="Enter Making charge"
                                                   th:field="*{mcAmount}"
                                                   type="number">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="rate"
                                                   name="rate"
                                                   placeholder="Rate"
                                                   th:field="*{rate}"
                                                   type="number" step="any">
                                        </div>
                                    </div>
                                    <hr/>
                                    <div class="form-group row">
                                        <div class="col mb-sm-0">
                                            <div class="custom-control d-flex">
                                                <label class="pr-5">GST Purchase? </label>
                                                <div class="custom-radio small">
                                                    <input type="radio" class="custom-control-input enableGst" th:field="*{isGstPurchase}" th:value="YES" id="gstYes" >
                                                    <label class="custom-control-label pt-1" for="gstYes">YES</label>
                                                </div>
                                                <div class="custom-radio small pl-5">
                                                    <input type="radio" class="custom-control-input enableGst" th:field="*{isGstPurchase}" th:value="NO" id="gstNo" >
                                                    <label class="custom-control-label pt-1" for="gstNo">NO</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="cGstAmount"
                                                   name="cGstAmount"
                                                   placeholder="CGST"
                                                   th:field="*{cGstAmount}"
                                                   type="text">
                                        </div>
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="sGstAmount"
                                                   name="sGstAmount"
                                                   placeholder="SGST"
                                                   th:field="*{sGstAmount}"
                                                   type="text">
                                        </div>
                                    </div>
                                    <hr/>
                                    <div class="form-group row">
                                        <div class="col-sm-3 mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="totalPurchaseAmount"
                                                   name="totalPurchaseAmount"
                                                   placeholder="Total purchase amount"
                                                   readonly="readonly"
                                                   th:field="*{totalPurchaseAmount}"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col mb-2 mb-sm-0">
                                            <input class="form-control form-control-user"
                                                   id="description"
                                                   name="description"
                                                   placeholder="Purchase Details"
                                                   th:field="*{description}"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-6 mb-2 mb-sm-0 text-right">
                                            <button class="btn btn-primary btn-user" type="submit">Save</button>
                                        </div>
                                        <div class="col-sm-6 mb-2 mb-sm-0">
                                            <button class="btn btn-danger btn-user" type="button" id="cancelBtn">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Purchase List</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                    <tr>
                        <th>Supplier</th>
                        <th>Date</th>
                        <th>Purchase Bii#</th>
                        <th>Purchase Amount</th>
                        <th>Action</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:each = "purchase : ${purchaseList}">
                        <td th:text = "${purchase.supplierName}"></td>
                        <td th:text = "${#temporals.format(purchase.purchaseDate, 'MM/dd/yyyy')}"></td>
                        <td th:text = "${purchase.purchaseBillNo}"></td>
                        <td th:text = "${purchase.totalPurchaseAmount}"></td>
                        <td>
                            <a class="btn btn-primary editPurchase" th:attr="data-id=${purchase.id}" href="#" title="Edit Purchase"><i class="fas fa-pencil"></i></a>
                            <a class="btn btn-primary purchaseItems" th:attr="data-id=${purchase.id}" href="#" title="Purchase Items"><i class="fas fa-bars"></i></a>
                            <a class="btn btn-danger deletePurchase" th:attr="data-id=${purchase.id}" href="#" title="Delete Purchase"><i class="fas fa-trash"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>



</div>
<th:block layout:fragment="script">
    <script th:src="@{/js/purchase.js}"></script>
</th:block>
</html>
